import{_ as s,c as a,o as n,Q as o}from"./chunks/framework.0fcaa977.js";const f=JSON.parse('{"title":"Migration Guide","description":"Guide to migrate to newer versions of viem.","frontmatter":{"head":[["meta",{"property":"og:title","content":"Migration Guide"}],["meta",{"name":"description","content":"Guide to migrate to newer versions of viem."}],["meta",{"property":"og:description","content":"Guide to migrate to newer versions of viem."}]]},"headers":[],"relativePath":"docs/migration-guide.md","filePath":"docs/migration-guide.md"}'),l={name:"docs/migration-guide.md"},p=o(`<h1 id="migration-guide" tabindex="-1">Migration Guide <a class="header-anchor" href="#migration-guide" aria-label="Permalink to &quot;Migration Guide&quot;">​</a></h1><p>If you are coming from an earlier version of <code>viem</code>, you will need to make sure to update the following APIs listed below.</p><h2 id="_1-x-x-breaking-changes" tabindex="-1">1.x.x Breaking changes <a class="header-anchor" href="#_1-x-x-breaking-changes" aria-label="Permalink to &quot;1.x.x Breaking changes&quot;">​</a></h2><p>The 1.x.x release only includes very minor changes to the behavior in event log decoding, and removes the redundant ethers.js Wallet Adapter. If you do not directly use these APIs, you do not need to update any of your code for this version.</p><h3 id="removed-etherswallettoaccount" tabindex="-1">Removed <code>ethersWalletToAccount</code> <a class="header-anchor" href="#removed-etherswallettoaccount" aria-label="Permalink to &quot;Removed \`ethersWalletToAccount\`&quot;">​</a></h3><p>The <code>ethersWalletToAccount</code> adapter has been removed.</p><p>This adapter was introduced when viem did not have Private Key &amp; HD Accounts. Since 0.2, viem provides all the utilities needed to create and import <a href="https://viem.sh/docs/accounts/privateKey.html" target="_blank" rel="noreferrer">Private Key</a> &amp; <a href="https://viem.sh/docs/accounts/mnemonic.html" target="_blank" rel="noreferrer">HD Accounts</a>.</p><p>If you still need it, you can copy + paste the <a href="https://github.com/wagmi-dev/viem/blob/a9a71507032db896295fa1f3fa2dd6c2bdc85137/src/adapters/ethers.ts" target="_blank" rel="noreferrer">old implementation</a>.</p><h3 id="logindex-transactionindex-on-logs" tabindex="-1"><code>logIndex</code> &amp; <code>transactionIndex</code> on Logs <a class="header-anchor" href="#logindex-transactionindex-on-logs" aria-label="Permalink to &quot;\`logIndex\` &amp; \`transactionIndex\` on Logs&quot;">​</a></h3><p><code>logIndex</code> &amp; <code>transactionIndex</code> on <code>Log</code> now return a <code>number</code> instead of a <code>bigint</code>.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">log</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Log</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">...</span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  logIndex: </span><span style="color:#79B8FF;">1</span><span style="color:#F97583;">n</span><span style="color:#E1E4E8;">, </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  logIndex: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  transactionIndex: </span><span style="color:#79B8FF;">1</span><span style="color:#F97583;">n</span><span style="color:#E1E4E8;">, </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  transactionIndex: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">log</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Log</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span></span>
<span class="line diff remove"><span style="color:#24292E;">  logIndex: </span><span style="color:#005CC5;">1</span><span style="color:#D73A49;">n</span><span style="color:#24292E;">, </span></span>
<span class="line diff add"><span style="color:#24292E;">  logIndex: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span></span>
<span class="line diff remove"><span style="color:#24292E;">  transactionIndex: </span><span style="color:#005CC5;">1</span><span style="color:#D73A49;">n</span><span style="color:#24292E;">, </span></span>
<span class="line diff add"><span style="color:#24292E;">  transactionIndex: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="minor-decodeeventlog-behavior-change" tabindex="-1">Minor: <code>decodeEventLog</code> behavior change <a class="header-anchor" href="#minor-decodeeventlog-behavior-change" aria-label="Permalink to &quot;Minor: \`decodeEventLog\` behavior change&quot;">​</a></h3><p><code>decodeEventLog</code> no longer attempts to partially decode events. If the Log does not conform to the ABI (mismatch between the number of indexed/non-indexed arguments to topics/data), it will throw an error.</p><p>For example, the following Log will throw an error as there is a mismatch in non-<code>indexed</code> arguments &amp; <code>data</code> length.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-highlighted-lines vp-code-dark"><code><span class="line"><span style="color:#B392F0;">decodeEventLog</span><span style="color:#E1E4E8;">({</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  abi: </span><span style="color:#B392F0;">parseAbi</span><span style="color:#E1E4E8;">([</span><span style="color:#9ECBFF;">&#39;event Transfer(address indexed, address, uint256)&#39;</span><span style="color:#E1E4E8;">]),</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// \`data\` should be 64 bytes, but is only 32 bytes.</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">  data: </span><span style="color:#9ECBFF;">&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  topics: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-highlighted-lines vp-code-light"><code><span class="line"><span style="color:#6F42C1;">decodeEventLog</span><span style="color:#24292E;">({</span></span>
<span class="line highlighted"><span style="color:#24292E;">  abi: </span><span style="color:#6F42C1;">parseAbi</span><span style="color:#24292E;">([</span><span style="color:#032F62;">&#39;event Transfer(address indexed, address, uint256)&#39;</span><span style="color:#24292E;">]),</span></span>
<span class="line highlighted"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// \`data\` should be 64 bytes, but is only 32 bytes.</span></span>
<span class="line highlighted"><span style="color:#24292E;">  data: </span><span style="color:#032F62;">&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;</span></span>
<span class="line"><span style="color:#24292E;">  topics: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  ]</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>Previously, the above would only decode the <code>indexed</code> arguments.</p><p>If you would like to partially decode event logs (previous behavior), you can turn off <code>strict</code> mode:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#B392F0;">decodeEventLog</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  abi: </span><span style="color:#B392F0;">parseAbi</span><span style="color:#E1E4E8;">([</span><span style="color:#9ECBFF;">&#39;event Transfer(address indexed, address, uint256)&#39;</span><span style="color:#E1E4E8;">]),</span></span>
<span class="line"><span style="color:#E1E4E8;">  data: </span><span style="color:#9ECBFF;">&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  topics: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  strict: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#6F42C1;">decodeEventLog</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  abi: </span><span style="color:#6F42C1;">parseAbi</span><span style="color:#24292E;">([</span><span style="color:#032F62;">&#39;event Transfer(address indexed, address, uint256)&#39;</span><span style="color:#24292E;">]),</span></span>
<span class="line"><span style="color:#24292E;">  data: </span><span style="color:#032F62;">&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;</span></span>
<span class="line"><span style="color:#24292E;">  topics: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line diff add"><span style="color:#24292E;">  strict: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h2 id="_0-3-x-breaking-changes" tabindex="-1">0.3.x Breaking changes <a class="header-anchor" href="#_0-3-x-breaking-changes" aria-label="Permalink to &quot;0.3.x Breaking changes&quot;">​</a></h2><p>The 0.3.x release only includes breaking changes around RPC errors. If you do not directly use the APIs listed below, you do not need to update any of your code for this version.</p><h3 id="renamed-requesterror-to-rpcerror" tabindex="-1">Renamed <code>RequestError</code> to <code>RpcError</code> <a class="header-anchor" href="#renamed-requesterror-to-rpcerror" aria-label="Permalink to &quot;Renamed \`RequestError\` to \`RpcError\`&quot;">​</a></h3><p><code>RequestError</code> was renamed <code>RpcError</code> for clarity.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RequestError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RpcError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RequestError</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;An error occurred.&#39;</span><span style="color:#E1E4E8;">))  </span></span>
<span class="line diff add"><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RpcError</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;An error occurred.&#39;</span><span style="color:#E1E4E8;">))  </span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RequestError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;">  </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RpcError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RequestError</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;An error occurred.&#39;</span><span style="color:#24292E;">))  </span></span>
<span class="line diff add"><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RpcError</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;An error occurred.&#39;</span><span style="color:#24292E;">))  </span></span></code></pre></div><h3 id="removed-rpcrequesterror" tabindex="-1">Removed <code>RpcRequestError</code> <a class="header-anchor" href="#removed-rpcrequesterror" aria-label="Permalink to &quot;Removed \`RpcRequestError\`&quot;">​</a></h3><p><code>RpcRequestError</code> was removed. Use <code>RpcError</code> instead.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RpcRequestError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RpcError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RpcRequestError</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;An error occurred.&#39;</span><span style="color:#E1E4E8;">)) </span></span>
<span class="line diff add"><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RpcError</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;An error occurred.&#39;</span><span style="color:#E1E4E8;">)) </span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RpcRequestError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RpcError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RpcRequestError</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;An error occurred.&#39;</span><span style="color:#24292E;">)) </span></span>
<span class="line diff add"><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RpcError</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;An error occurred.&#39;</span><span style="color:#24292E;">)) </span></span></code></pre></div><h3 id="renamed-rpcerror-to-rpcrequesterror" tabindex="-1">Renamed <code>RpcError</code> to <code>RpcRequestError</code> <a class="header-anchor" href="#renamed-rpcerror-to-rpcrequesterror" aria-label="Permalink to &quot;Renamed \`RpcError\` to \`RpcRequestError\`&quot;">​</a></h3><p><code>RpcError</code> was renamed <code>RpcRequestError</code> for consistency.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RpcError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RpcRequestError } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">err</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RpcError</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">const err </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RpcRequestError</span><span style="color:#E1E4E8;">({  </span></span>
<span class="line"><span style="color:#E1E4E8;">  body: { foo: </span><span style="color:#9ECBFF;">&#39;bar&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  error: { code: </span><span style="color:#79B8FF;">420</span><span style="color:#E1E4E8;">, message: </span><span style="color:#9ECBFF;">&#39;Error&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  url: </span><span style="color:#9ECBFF;">&#39;https://example-rpc.com&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RpcError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { RpcRequestError } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;">  </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">err</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RpcError</span><span style="color:#24292E;">({ </span></span>
<span class="line diff add"><span style="color:#24292E;">const err </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RpcRequestError</span><span style="color:#24292E;">({  </span></span>
<span class="line"><span style="color:#24292E;">  body: { foo: </span><span style="color:#032F62;">&#39;bar&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  error: { code: </span><span style="color:#005CC5;">420</span><span style="color:#24292E;">, message: </span><span style="color:#032F62;">&#39;Error&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  url: </span><span style="color:#032F62;">&#39;https://example-rpc.com&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h2 id="_0-2-x-breaking-changes" tabindex="-1">0.2.x Breaking changes <a class="header-anchor" href="#_0-2-x-breaking-changes" aria-label="Permalink to &quot;0.2.x Breaking changes&quot;">​</a></h2><h3 id="chain-is-required-for-sendtransaction-writecontract-deploycontract" tabindex="-1"><code>chain</code> is required for <code>sendTransaction</code>, <code>writeContract</code>, <code>deployContract</code> <a class="header-anchor" href="#chain-is-required-for-sendtransaction-writecontract-deploycontract" aria-label="Permalink to &quot;\`chain\` is required for \`sendTransaction\`, \`writeContract\`, \`deployContract\`&quot;">​</a></h3><p>A chain is now required for the <code>sendTransaction</code>, <code>writeContract</code>, <code>deployContract</code> Actions.</p><p>You can hoist the Chain on the Client:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, custom, getAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { mainnet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">walletClient</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">({</span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#E1E4E8;">  transport: </span><span style="color:#B392F0;">custom</span><span style="color:#E1E4E8;">(window.ethereum)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">account</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAccount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">hash</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> walletClient.</span><span style="color:#B392F0;">sendTransaction</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line"><span style="color:#E1E4E8;">  account,</span></span>
<span class="line"><span style="color:#E1E4E8;">  to: </span><span style="color:#9ECBFF;">&#39;0x70997970c51812dc3a010c7d01b50e0d17dc79c8&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  value: </span><span style="color:#79B8FF;">1000000000000000000</span><span style="color:#F97583;">n</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, custom, getAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { mainnet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">walletClient</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">({</span></span>
<span class="line diff add"><span style="color:#24292E;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#24292E;">  transport: </span><span style="color:#6F42C1;">custom</span><span style="color:#24292E;">(window.ethereum)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">account</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAccount</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">hash</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> walletClient.</span><span style="color:#6F42C1;">sendTransaction</span><span style="color:#24292E;">({ </span></span>
<span class="line"><span style="color:#24292E;">  account,</span></span>
<span class="line"><span style="color:#24292E;">  to: </span><span style="color:#032F62;">&#39;0x70997970c51812dc3a010c7d01b50e0d17dc79c8&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  value: </span><span style="color:#005CC5;">1000000000000000000</span><span style="color:#D73A49;">n</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>Alternatively, you can pass the Chain directly to the Action:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, custom, getAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { mainnet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">walletClient</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">({</span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#E1E4E8;">  transport: </span><span style="color:#B392F0;">custom</span><span style="color:#E1E4E8;">(window.ethereum)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">account</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAccount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">hash</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> walletClient.</span><span style="color:#B392F0;">sendTransaction</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line"><span style="color:#E1E4E8;">  account,</span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#E1E4E8;">  to: </span><span style="color:#9ECBFF;">&#39;0x70997970c51812dc3a010c7d01b50e0d17dc79c8&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  value: </span><span style="color:#79B8FF;">1000000000000000000</span><span style="color:#F97583;">n</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, custom, getAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { mainnet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">walletClient</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">({</span></span>
<span class="line diff remove"><span style="color:#24292E;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#24292E;">  transport: </span><span style="color:#6F42C1;">custom</span><span style="color:#24292E;">(window.ethereum)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">account</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAccount</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">hash</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> walletClient.</span><span style="color:#6F42C1;">sendTransaction</span><span style="color:#24292E;">({ </span></span>
<span class="line"><span style="color:#24292E;">  account,</span></span>
<span class="line diff add"><span style="color:#24292E;">  chain: mainnet, </span></span>
<span class="line"><span style="color:#24292E;">  to: </span><span style="color:#032F62;">&#39;0x70997970c51812dc3a010c7d01b50e0d17dc79c8&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  value: </span><span style="color:#005CC5;">1000000000000000000</span><span style="color:#D73A49;">n</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h3 id="recoveraddress-recovermessageaddress-verifymessage-are-now-async" tabindex="-1"><code>recoverAddress</code>, <code>recoverMessageAddress</code>, <code>verifyMessage</code> are now async <a class="header-anchor" href="#recoveraddress-recovermessageaddress-verifymessage-are-now-async" aria-label="Permalink to &quot;\`recoverAddress\`, \`recoverMessageAddress\`, \`verifyMessage\` are now async&quot;">​</a></h3><p>he following functions are now <code>async</code> functions instead of synchronous functions:</p><ul><li><code>recoverAddress</code></li><li><code>recoverMessageAddress</code></li><li><code>verifyMessage</code></li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { recoverMessageAddress } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#B392F0;">recoverMessageAddress</span><span style="color:#E1E4E8;">({ message: </span><span style="color:#9ECBFF;">&#39;hello world&#39;</span><span style="color:#E1E4E8;">, signature: </span><span style="color:#9ECBFF;">&#39;0x...&#39;</span><span style="color:#E1E4E8;"> }) </span></span>
<span class="line diff add"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">recoverMessageAddress</span><span style="color:#E1E4E8;">({ message: </span><span style="color:#9ECBFF;">&#39;hello world&#39;</span><span style="color:#E1E4E8;">, signature: </span><span style="color:#9ECBFF;">&#39;0x...&#39;</span><span style="color:#E1E4E8;"> }) </span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { recoverMessageAddress } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#6F42C1;">recoverMessageAddress</span><span style="color:#24292E;">({ message: </span><span style="color:#032F62;">&#39;hello world&#39;</span><span style="color:#24292E;">, signature: </span><span style="color:#032F62;">&#39;0x...&#39;</span><span style="color:#24292E;"> }) </span></span>
<span class="line diff add"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">recoverMessageAddress</span><span style="color:#24292E;">({ message: </span><span style="color:#032F62;">&#39;hello world&#39;</span><span style="color:#24292E;">, signature: </span><span style="color:#032F62;">&#39;0x...&#39;</span><span style="color:#24292E;"> }) </span></span></code></pre></div><h3 id="assertchain-removed-from-sendtransaction" tabindex="-1"><code>assertChain</code> removed from <code>sendTransaction</code> <a class="header-anchor" href="#assertchain-removed-from-sendtransaction" aria-label="Permalink to &quot;\`assertChain\` removed from \`sendTransaction\`&quot;">​</a></h3><p>Removed <code>assertChain</code> argument on <code>sendTransaction</code>, <code>writeContract</code> &amp; <code>deployContract</code>. If you wish to bypass the chain check (not recommended unless for testing purposes), you can pass <code>chain: null</code>.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> walletClient.</span><span style="color:#B392F0;">sendTransaction</span><span style="color:#E1E4E8;">({</span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  assertChain: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  chain: </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> walletClient.</span><span style="color:#6F42C1;">sendTransaction</span><span style="color:#24292E;">({</span></span>
<span class="line diff remove"><span style="color:#24292E;">  assertChain: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span></span>
<span class="line diff add"><span style="color:#24292E;">  chain: </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h3 id="getaccount-removed" tabindex="-1"><code>getAccount</code> removed <a class="header-anchor" href="#getaccount-removed" aria-label="Permalink to &quot;\`getAccount\` removed&quot;">​</a></h3><p>Removed the <code>getAccount</code> function.</p><h4 id="for-json-rpc-accounts-use-the-address-itself" tabindex="-1">For JSON-RPC Accounts, use the address itself. <a class="header-anchor" href="#for-json-rpc-accounts-use-the-address-itself" aria-label="Permalink to &quot;For JSON-RPC Accounts, use the address itself.&quot;">​</a></h4><p>You can now pass the address directly to the <code>account</code> option.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, custom } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { mainnet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">address</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">({</span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  account: </span><span style="color:#B392F0;">getAccount</span><span style="color:#E1E4E8;">(address), </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  account: address, </span></span>
<span class="line"><span style="color:#E1E4E8;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#E1E4E8;">  transport: </span><span style="color:#B392F0;">custom</span><span style="color:#E1E4E8;">(window.ethereum)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, custom } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { mainnet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/chains&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">address</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">client</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">({</span></span>
<span class="line diff remove"><span style="color:#24292E;">  account: </span><span style="color:#6F42C1;">getAccount</span><span style="color:#24292E;">(address), </span></span>
<span class="line diff add"><span style="color:#24292E;">  account: address, </span></span>
<span class="line"><span style="color:#24292E;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#24292E;">  transport: </span><span style="color:#6F42C1;">custom</span><span style="color:#24292E;">(window.ethereum)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h4 id="for-ethers-wallet-adapter-use-etherswallettoaccount" tabindex="-1">For Ethers Wallet Adapter, use <code>ethersWalletToAccount</code>. <a class="header-anchor" href="#for-ethers-wallet-adapter-use-etherswallettoaccount" aria-label="Permalink to &quot;For Ethers Wallet Adapter, use \`ethersWalletToAccount\`.&quot;">​</a></h4><p>If you were using the Ethers Wallet adapter, you can use the <code>ethersWalletToAccount</code> function.</p><blockquote><p>Note: viem 0.2.0 now has a <a href="/docs/accounts/privateKey.html">Private Key</a> &amp; <a href="/docs/accounts/mnemonic.html">Mnemonic Account</a> implementation. You probably do not need this adapter anymore. This adapter may be removed in a future version.</p></blockquote><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, custom } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { mainnet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/chains&#39;</span></span>
<span class="line diff remove"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { getAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/ethers&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ethersWalletToAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/ethers&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Wallet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;ethers&#39;</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">account</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAccount</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Wallet</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;0x...&#39;</span><span style="color:#E1E4E8;">)) </span></span>
<span class="line diff add"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">account</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ethersWalletToAccount</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Wallet</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;0x...&#39;</span><span style="color:#E1E4E8;">)) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  account,</span></span>
<span class="line"><span style="color:#E1E4E8;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#E1E4E8;">  transport: </span><span style="color:#B392F0;">custom</span><span style="color:#E1E4E8;">(window.ethereum)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, custom } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { mainnet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/chains&#39;</span></span>
<span class="line diff remove"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { getAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/ethers&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ethersWalletToAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/ethers&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Wallet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;ethers&#39;</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">account</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAccount</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Wallet</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;0x...&#39;</span><span style="color:#24292E;">)) </span></span>
<span class="line diff add"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">account</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ethersWalletToAccount</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Wallet</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;0x...&#39;</span><span style="color:#24292E;">)) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">client</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  account,</span></span>
<span class="line"><span style="color:#24292E;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#24292E;">  transport: </span><span style="color:#6F42C1;">custom</span><span style="color:#24292E;">(window.ethereum)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h4 id="for-local-accounts-use-toaccount" tabindex="-1">For Local Accounts, use <code>toAccount</code>. <a class="header-anchor" href="#for-local-accounts-use-toaccount" aria-label="Permalink to &quot;For Local Accounts, use \`toAccount\`.&quot;">​</a></h4><p>If you are using a custom signing implementation, you can use the <code>toAccount</code> function.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, http, getAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, http } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff add"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { toAccount } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/accounts&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { mainnet } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem/chains&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { getAddress, signMessage, signTransaction } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./sign-utils&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">privateKey</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;0x...&#39;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line diff remove"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">account</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAccount</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">const account </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toAccount</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line"><span style="color:#E1E4E8;">  address: </span><span style="color:#B392F0;">getAddress</span><span style="color:#E1E4E8;">(privateKey),</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">signMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">message</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">signMessage</span><span style="color:#E1E4E8;">(message, privateKey)</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">signTransaction</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">transaction</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">signTransaction</span><span style="color:#E1E4E8;">(transaction, privateKey)</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">signTypedData</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">typedData</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">signTypedData</span><span style="color:#E1E4E8;">(typedData, privateKey)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">const client </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  account,</span></span>
<span class="line"><span style="color:#E1E4E8;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#E1E4E8;">  transport: </span><span style="color:#B392F0;">http</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, http, getAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, http } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff add"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { toAccount } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/accounts&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { mainnet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem/chains&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { getAddress, signMessage, signTransaction } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./sign-utils&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">privateKey</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;0x...&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line diff remove"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">account</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAccount</span><span style="color:#24292E;">({ </span></span>
<span class="line diff add"><span style="color:#24292E;">const account </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toAccount</span><span style="color:#24292E;">({ </span></span>
<span class="line"><span style="color:#24292E;">  address: </span><span style="color:#6F42C1;">getAddress</span><span style="color:#24292E;">(privateKey),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">signMessage</span><span style="color:#24292E;">(</span><span style="color:#E36209;">message</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">signMessage</span><span style="color:#24292E;">(message, privateKey)</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">signTransaction</span><span style="color:#24292E;">(</span><span style="color:#E36209;">transaction</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">signTransaction</span><span style="color:#24292E;">(transaction, privateKey)</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">signTypedData</span><span style="color:#24292E;">(</span><span style="color:#E36209;">typedData</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">signTypedData</span><span style="color:#24292E;">(typedData, privateKey)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">const client </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  account,</span></span>
<span class="line"><span style="color:#24292E;">  chain: mainnet,</span></span>
<span class="line"><span style="color:#24292E;">  transport: </span><span style="color:#6F42C1;">http</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h3 id="data-renamed-in-signmessage" tabindex="-1"><code>data</code> renamed in <code>signMessage</code> <a class="header-anchor" href="#data-renamed-in-signmessage" aria-label="Permalink to &quot;\`data\` renamed in \`signMessage\`&quot;">​</a></h3><p>Renamed the <code>data</code> parameter in <code>signMessage</code> to <code>message</code>.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">walletClient.</span><span style="color:#B392F0;">signMessage</span><span style="color:#E1E4E8;">({</span></span>
<span class="line diff remove"><span style="color:#E1E4E8;">  data: </span><span style="color:#9ECBFF;">&#39;hello world&#39;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line diff add"><span style="color:#E1E4E8;">  message: </span><span style="color:#9ECBFF;">&#39;hello world&#39;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#24292E;">walletClient.</span><span style="color:#6F42C1;">signMessage</span><span style="color:#24292E;">({</span></span>
<span class="line diff remove"><span style="color:#24292E;">  data: </span><span style="color:#032F62;">&#39;hello world&#39;</span><span style="color:#24292E;">, </span></span>
<span class="line diff add"><span style="color:#24292E;">  message: </span><span style="color:#032F62;">&#39;hello world&#39;</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div>`,58),e=[p];function c(t,r,E,y,i,d){return n(),a("div",null,e)}const F=s(l,[["render",c]]);export{f as __pageData,F as default};
