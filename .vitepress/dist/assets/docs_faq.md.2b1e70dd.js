import{_ as s,c as n,o as a,Q as e}from"./chunks/framework.0fcaa977.js";const h=JSON.parse('{"title":"Frequently Asked Questions","description":"Frequently Asked Questions","frontmatter":{"head":[["meta",{"property":"og:title","content":"FAQ"}],["meta",{"name":"description","content":"Frequently Asked Questions"}],["meta",{"property":"og:description","content":"Frequently Asked Questions"}]]},"headers":[],"relativePath":"docs/faq.md","filePath":"docs/faq.md"}'),l={name:"docs/faq.md"},o=e(`<h1 id="frequently-asked-questions" tabindex="-1">Frequently Asked Questions <a class="header-anchor" href="#frequently-asked-questions" aria-label="Permalink to &quot;Frequently Asked Questions&quot;">​</a></h1><p>Frequently asked questions related to viem.</p><p><strong>TL;DR: viem tries to avoid creating unnecessary abstractions on top of existing systems.</strong></p><p>Feel free to add to this document if you notice frequently asked questions that are not covered here.</p><nav class="table-of-contents"><ul><li><a href="#why-use-the-terms-wallet-account-instead-of-signer">Why use the terms &quot;Wallet&quot; &amp; &quot;Account&quot; instead of &quot;Signer&quot;</a></li><li><a href="#why-are-contract-function-args-with-fully-named-inputs-represented-as-unnamed-tuple-types-instead-of-object-types">Why are contract function args with fully-named inputs represented as unnamed tuple types instead of object types?</a></li><li><a href="#why-is-a-contract-function-return-type-returning-an-array-instead-of-an-object">Why is a contract function return type returning an array instead of an object?</a></li><li><a href="#why-doesn-t-wallet-client-support-public-actions">Why doesn&#39;t Wallet Client support public actions?</a></li></ul></nav><h2 id="why-use-the-terms-wallet-account-instead-of-signer" tabindex="-1">Why use the terms &quot;Wallet&quot; &amp; &quot;Account&quot; instead of &quot;Signer&quot; <a class="header-anchor" href="#why-use-the-terms-wallet-account-instead-of-signer" aria-label="Permalink to &quot;Why use the terms &quot;Wallet&quot; &amp; &quot;Account&quot; instead of &quot;Signer&quot;&quot;">​</a></h2><p>viem attempts to align to the &quot;Wallet&quot; and &quot;Account&quot; <a href="https://ethereum.org/en/glossary/" target="_blank" rel="noreferrer">terminology on Ethereum.org</a>. The term &quot;Signer&quot; was adapted from ethers.js.</p><p>Let&#39;s clear up on some terms before we dive in.</p><ul><li>Wallet: An application or interface that holds Account(s).</li><li>Account: An object that represents an address, balance, nonce, and optional storage and code.</li><li>Private Key: Proves ownership of an Account, and can sign messages &amp; transactions.</li></ul><p>In the context of viem, a Wallet Client is an interface that can hold an Account. The Account may or may not hold a Private Key.</p><p>In viem, there are two types of Accounts:</p><ul><li>Local Account: can <strong>synchronously &amp; directly</strong> sign messages and transactions using its Private Key. A signature is guarenteed.</li><li>JSON-RPC Account: <strong>asynchronously requests</strong> signing of messages and transactions from the target Wallet over JSON-RPC (e.g. Browser Extension or WalletConnect). The target Wallet holds the Account &amp; Private Key. A signature is not guarenteed (the target Wallet may not have permitted the Account, or the Wallet may have rejected the request).</li></ul><p>We do not use the term &quot;Signer&quot; because there are noticible behavioral differences between signing locally and signing over JSON-RPC.</p><h2 id="why-are-contract-function-args-with-fully-named-inputs-represented-as-unnamed-tuple-types-instead-of-object-types" tabindex="-1">Why are contract function <code>args</code> with fully-named inputs represented as unnamed tuple types instead of object types? <a class="header-anchor" href="#why-are-contract-function-args-with-fully-named-inputs-represented-as-unnamed-tuple-types-instead-of-object-types" aria-label="Permalink to &quot;Why are contract function \`args\` with fully-named inputs represented as unnamed tuple types instead of object types?&quot;">​</a></h2><p>Let&#39;s look at an example! Suppose I have the following function in my contract:</p><div class="language-sol vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sol</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">function transferFrom(address sender, address recipient, uint256 amount) returns (bool)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">function transferFrom(address sender, address recipient, uint256 amount) returns (bool)</span></span></code></pre></div><p>All the inputs are named (<code>sender</code>, <code>recipient</code>, and <code>amount</code>) so I might be tempted to represent the parameters as the following TypeScript type:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Args</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">sender</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">recipient</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">amount</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">bigint</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Args</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">sender</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">recipient</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">amount</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">bigint</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>This improves developer experience a bit because now I can see the names of the parameters in my editor.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createWalletClient, parseAbi } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createWalletClient</span><span style="color:#E1E4E8;">(…)</span></span>
<span class="line"><span style="color:#E1E4E8;">client.</span><span style="color:#B392F0;">writeContract</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  address: </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  abi: </span><span style="color:#B392F0;">parseAbi</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;function transferFrom(address sender, address recipient, uint256 amount) returns (bool)&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]),</span></span>
<span class="line"><span style="color:#E1E4E8;">  functionName: </span><span style="color:#9ECBFF;">&#39;transferFrom&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  args: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    sender: </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    recipient: </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    amount: </span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">n</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createWalletClient, parseAbi } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">client</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createWalletClient</span><span style="color:#24292E;">(…)</span></span>
<span class="line"><span style="color:#24292E;">client.</span><span style="color:#6F42C1;">writeContract</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  address: </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  abi: </span><span style="color:#6F42C1;">parseAbi</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;function transferFrom(address sender, address recipient, uint256 amount) returns (bool)&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  ]),</span></span>
<span class="line"><span style="color:#24292E;">  functionName: </span><span style="color:#032F62;">&#39;transferFrom&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  args: {</span></span>
<span class="line"><span style="color:#24292E;">    sender: </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    recipient: </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    amount: </span><span style="color:#005CC5;">100</span><span style="color:#D73A49;">n</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>However, this only works if all the inputs are named (some compilers will strip names from inputs). If any of the inputs are unnamed, then you&#39;ll have to use a tuple instead:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">client.</span><span style="color:#B392F0;">writeContract</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  address: </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  abi: </span><span style="color:#B392F0;">parseAbi</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;function transferFrom(address, address, uint256) returns (bool)&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]),</span></span>
<span class="line"><span style="color:#E1E4E8;">  functionName: </span><span style="color:#9ECBFF;">&#39;transferFrom&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  args: [</span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">n</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">client.</span><span style="color:#6F42C1;">writeContract</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  address: </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  abi: </span><span style="color:#6F42C1;">parseAbi</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;function transferFrom(address, address, uint256) returns (bool)&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  ]),</span></span>
<span class="line"><span style="color:#24292E;">  functionName: </span><span style="color:#032F62;">&#39;transferFrom&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  args: [</span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">100</span><span style="color:#D73A49;">n</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>This can get even more complicated when a function has overrides:</p><div class="language-sol vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sol</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">function safeTransferFrom(address, address, uint256)</span></span>
<span class="line"><span style="color:#e1e4e8;">function safeTransferFrom(address from, address to, uint256 tokenId, bytes data)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">function safeTransferFrom(address, address, uint256)</span></span>
<span class="line"><span style="color:#24292e;">function safeTransferFrom(address from, address to, uint256 tokenId, bytes data)</span></span></code></pre></div><p>In this case, the type of the overload parameters starts to diverage from each other:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Args</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">bigint</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#FFAB70;">from</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#FFAB70;">to</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#FFAB70;">tokenId</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">bigint</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#FFAB70;">data</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Args</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">bigint</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">from</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">to</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">tokenId</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">bigint</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">data</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><p>If you want to switch between the two overloads in your code, you&#39;ll need to completely change the type instead of just adding or removing a single positional argument from the end. (Objects also don&#39;t enforce type-level ordering so you can put them in whatever order you want. This would also mean that viem would also need to internally validate order during runtime, adding some extra overhead.)</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">client.writeContract({</span></span>
<span class="line"><span style="color:#E1E4E8;">  address: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  abi: parseAbi([</span></span>
<span class="line"><span style="color:#E1E4E8;">    &#39;function safeTransferFrom(address, address, uint256)&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    &#39;function safeTransferFrom(address from, address to, uint256 tokenId, bytes data)&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]),</span></span>
<span class="line"><span style="color:#E1E4E8;">  functionName: &#39;safeTransferFrom&#39;,</span></span>
<span class="line"><span style="color:#FDAEB7;">- args: [&#39;0x…&#39;, &#39;0x…&#39;, 100n],</span></span>
<span class="line"><span style="color:#85E89D;">+ args: {</span></span>
<span class="line"><span style="color:#85E89D;">+   from: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#85E89D;">+   to: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#85E89D;">+   tokenId: 100n,</span></span>
<span class="line"><span style="color:#85E89D;">+   data: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#85E89D;">+ },</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">client.writeContract({</span></span>
<span class="line"><span style="color:#24292E;">  address: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#24292E;">  abi: parseAbi([</span></span>
<span class="line"><span style="color:#24292E;">    &#39;function safeTransferFrom(address, address, uint256)&#39;,</span></span>
<span class="line"><span style="color:#24292E;">    &#39;function safeTransferFrom(address from, address to, uint256 tokenId, bytes data)&#39;,</span></span>
<span class="line"><span style="color:#24292E;">  ]),</span></span>
<span class="line"><span style="color:#24292E;">  functionName: &#39;safeTransferFrom&#39;,</span></span>
<span class="line"><span style="color:#B31D28;">- args: [&#39;0x…&#39;, &#39;0x…&#39;, 100n],</span></span>
<span class="line"><span style="color:#22863A;">+ args: {</span></span>
<span class="line"><span style="color:#22863A;">+   from: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#22863A;">+   to: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#22863A;">+   tokenId: 100n,</span></span>
<span class="line"><span style="color:#22863A;">+   data: &#39;0x…&#39;,</span></span>
<span class="line"><span style="color:#22863A;">+ },</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>Even though overloads are an edge case, it would be sufficiently <a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment" target="_blank" rel="noreferrer">astonishing</a> to come across this behavior. So what&#39;s the best way to represent <code>args</code>? Well, they are positional at the contract-level so it makes sense to represent them that way in viem too.</p><p>Not all is lost when it comes to developer experience though! Tuple types in TypeScript can have <a href="https://www.typescriptlang.org/play?ts=4.0.2#example/named-tuples" target="_blank" rel="noreferrer">names</a> attached to them:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Args</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#B392F0;">from</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">to</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">\`0x\${</span><span style="color:#79B8FF;">string</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">tokenId</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">bigint</span><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Args</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span><span style="color:#6F42C1;">from</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">to</span><span style="color:#24292E;">: </span><span style="color:#032F62;">\`0x\${</span><span style="color:#005CC5;">string</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">tokenId</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">bigint</span><span style="color:#24292E;">]</span></span></code></pre></div><p>These names show up in your editor so you get nice developer experience when using autocomplete, etc. Unfortunately, TypeScript doesn&#39;t support dynamic named tuples right now, but we are watching <a href="https://github.com/microsoft/TypeScript/issues/44939" target="_blank" rel="noreferrer">this issue</a> closely and once it is implemented, we will add it to viem. In the meantime, hang tight!</p><h2 id="why-is-a-contract-function-return-type-returning-an-array-instead-of-an-object" tabindex="-1">Why is a contract function return type returning an array instead of an object? <a class="header-anchor" href="#why-is-a-contract-function-return-type-returning-an-array-instead-of-an-object" aria-label="Permalink to &quot;Why is a contract function return type returning an array instead of an object?&quot;">​</a></h2><p>Suppose you ABI looks like this:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    inputs: [],</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&quot;latestRoundData&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    outputs: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&quot;roundId&quot;</span><span style="color:#E1E4E8;">, type: </span><span style="color:#9ECBFF;">&quot;uint80&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&quot;answer&quot;</span><span style="color:#E1E4E8;">, type: </span><span style="color:#9ECBFF;">&quot;int256&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&quot;startedAt&quot;</span><span style="color:#E1E4E8;">, type: </span><span style="color:#9ECBFF;">&quot;uint256&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&quot;updatedAt&quot;</span><span style="color:#E1E4E8;">, type: </span><span style="color:#9ECBFF;">&quot;uint256&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&quot;answeredInRound&quot;</span><span style="color:#E1E4E8;">, type: </span><span style="color:#9ECBFF;">&quot;uint80&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    stateMutability: </span><span style="color:#9ECBFF;">&quot;view&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: </span><span style="color:#9ECBFF;">&quot;function&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span></span>
<span class="line"><span style="color:#24292E;">  {</span></span>
<span class="line"><span style="color:#24292E;">    inputs: [],</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&quot;latestRoundData&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    outputs: [</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&quot;roundId&quot;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&quot;uint80&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&quot;answer&quot;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&quot;int256&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&quot;startedAt&quot;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&quot;uint256&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&quot;updatedAt&quot;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&quot;uint256&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&quot;answeredInRound&quot;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&quot;uint80&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    stateMutability: </span><span style="color:#032F62;">&quot;view&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    type: </span><span style="color:#032F62;">&quot;function&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">]</span></span></code></pre></div><p>You might be confused why the following does not return an object:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createPublicClient, parseAbi } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createPublicClient</span><span style="color:#E1E4E8;">(…)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.</span><span style="color:#B392F0;">readContract</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  address: </span><span style="color:#9ECBFF;">&#39;0x…&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  abi: […], </span><span style="color:#6A737D;">// abi from above</span></span>
<span class="line"><span style="color:#E1E4E8;">  functionName: </span><span style="color:#9ECBFF;">&#39;latestRoundData&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">res</span></span>
<span class="line"><span style="color:#6A737D;">// ^? const res: [bigint, bigint, bigint, bigint, bigint]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createPublicClient, parseAbi } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;viem&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">client</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createPublicClient</span><span style="color:#24292E;">(…)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.</span><span style="color:#6F42C1;">readContract</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  address: </span><span style="color:#032F62;">&#39;0x…&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  abi: […], </span><span style="color:#6A737D;">// abi from above</span></span>
<span class="line"><span style="color:#24292E;">  functionName: </span><span style="color:#032F62;">&#39;latestRoundData&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">res</span></span>
<span class="line"><span style="color:#6A737D;">// ^? const res: [bigint, bigint, bigint, bigint, bigint]</span></span></code></pre></div><p>This is expected. <code>&quot;latestRoundData&quot;</code> <code>outputs</code> is an array of types, so you get an array of decoded values as the return type. viem only maps explicitly typed tuples as objects</p><p>Why does viem follow this approach? Here is the contract function definition for <code>latestRoundData</code> with two different return types:</p><div class="language-sol vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sol</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">function latestRoundData() external view</span></span>
<span class="line"><span style="color:#e1e4e8;">  returns (</span></span>
<span class="line"><span style="color:#e1e4e8;">    uint80 roundId,</span></span>
<span class="line"><span style="color:#e1e4e8;">    int256 answer,</span></span>
<span class="line"><span style="color:#e1e4e8;">    uint256 startedAt,</span></span>
<span class="line"><span style="color:#e1e4e8;">    uint256 updatedAt,</span></span>
<span class="line"><span style="color:#e1e4e8;">    uint80 answeredInRound</span></span>
<span class="line"><span style="color:#e1e4e8;">  );</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">struct Data {</span></span>
<span class="line"><span style="color:#e1e4e8;">  uint80 roundId;</span></span>
<span class="line"><span style="color:#e1e4e8;">  uint256 answer;</span></span>
<span class="line"><span style="color:#e1e4e8;">  uint256 startedAt;</span></span>
<span class="line"><span style="color:#e1e4e8;">  uint256 updatedAt;</span></span>
<span class="line"><span style="color:#e1e4e8;">  uint80 answeredInRound</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function latestRoundData() external view returns (Data data);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">function latestRoundData() external view</span></span>
<span class="line"><span style="color:#24292e;">  returns (</span></span>
<span class="line"><span style="color:#24292e;">    uint80 roundId,</span></span>
<span class="line"><span style="color:#24292e;">    int256 answer,</span></span>
<span class="line"><span style="color:#24292e;">    uint256 startedAt,</span></span>
<span class="line"><span style="color:#24292e;">    uint256 updatedAt,</span></span>
<span class="line"><span style="color:#24292e;">    uint80 answeredInRound</span></span>
<span class="line"><span style="color:#24292e;">  );</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">struct Data {</span></span>
<span class="line"><span style="color:#24292e;">  uint80 roundId;</span></span>
<span class="line"><span style="color:#24292e;">  uint256 answer;</span></span>
<span class="line"><span style="color:#24292e;">  uint256 startedAt;</span></span>
<span class="line"><span style="color:#24292e;">  uint256 updatedAt;</span></span>
<span class="line"><span style="color:#24292e;">  uint80 answeredInRound</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">function latestRoundData() external view returns (Data data);</span></span></code></pre></div><p>The first function returns a set of five items, so viem maps it to an array. The reason why we don&#39;t convert it to an object is because things get ambiguous when we come to decode structs. How do you determine the difference between a &quot;return&quot; tuple (first function) and a &quot;struct&quot; tuple (second function).</p><p>Another reason is that folks might expect it to be an array (because it is a set of return items). Other libraries, like ethers, mitigates this by returning a hybrid Array/Object type, but that kind of type is not serializable in JavaScript, and viem prefers to not try and &quot;hack&quot; JavaScript types.</p><h2 id="why-doesn-t-wallet-client-support-public-actions" tabindex="-1">Why doesn&#39;t Wallet Client support public actions? <a class="header-anchor" href="#why-doesn-t-wallet-client-support-public-actions" aria-label="Permalink to &quot;Why doesn&#39;t Wallet Client support public actions?&quot;">​</a></h2><p>Wallet Client doesn&#39;t support public actions because wallet providers (Injected <code>window.ethereum</code>, WalletConnect v2, etc.) may not provide a large majority of &quot;node&quot;/&quot;public&quot; RPC methods like <code>eth_call</code>, <code>eth_newFilter</code>, <code>eth_getLogs</code>, etc. This is because these methods are not required for a wallet provider to function properly. For example, a wallet provider may only support <code>eth_sendTransaction</code> and <code>eth_sign</code> and nothing else.</p>`,44),p=[o];function t(r,c,i,y,E,d){return a(),n("div",null,p)}const F=s(l,[["render",t]]);export{h as __pageData,F as default};
